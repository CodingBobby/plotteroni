function setup(){createCanvas(cvs.w,cvs.h)}function draw(){background(255),stroke(10),strokeWeight(1),line(0,center.y,cvs.w,center.y),line(center.x,cvs.h,center.x,0);for(var a=tics.y.n;a<=tics.y.p;a++)0==a&&a++,stroke(10),strokeWeight(1),line(center.x-5,center.y-a*one.y,center.x+5,center.y-a*one.y),noStroke(),fill(1),text(a.toString(),center.x+10,center.y-a*one.y+5);for(var a=tics.x.n;a<=tics.x.p;a++)0==a&&a++,stroke(10),strokeWeight(1),line(center.x-a*one.x,center.y-5,center.x-a*one.x,center.y+5),noStroke(),fill(1),j=-a,text(j.toString(),center.x-a*one.x-2.5*j.toString().length,center.y+20);for(var b in noFill(),strokeWeight(1.5),fig){let c=b%colors.length;for(var a in stroke(colors[c].r,colors[c].g,colors[c].b),beginShape(),fig[b])vertex(fig[b][a].x,fig[b][a].y);endShape()}noStroke();let c={w:70,h:15+15*fig.length};for(var b in fill(255),rect(cvs.w-c.w,0,cvs.w,c.h),fig){let a=b%colors.length;fill(colors[a].r,colors[a].g,colors[a].b);const d=cvs.w-c.w;rect(d+5,20*b,15,15),fill(10),text(plot.functions[b].name,d+30,12+20*b)}}let colors=[{r:25,g:25,b:200},{r:25,g:200,b:25},{r:200,g:25,b:25},{r:100,g:125,b:25},{r:50,g:75,b:100},{r:110,g:12,b:190},{r:200,g:110,b:45}],cvs={h:plot.options.height,w:plot.options.width},center={x:cvs.w/2,y:cvs.h/2},fig=[],res=1,scale={x:plot.options.scale,y:plot.options.scale},one={x:scale.x*cvs.w/10,y:scale.y*cvs.w/10},yMax={p:center.y/one.y+10,n:-(cvs.h-center.y)/one.y-10},tics={x:{p:Math.floor(center.x/one.x),n:Math.floor((center.x-cvs.w)/one.x)},y:{p:Math.floor(center.y/one.y),n:-Math.floor((cvs.h-center.y)/one.y)}},functionArray=plot.functions,counter=0;functionArray.forEach(a=>{fig.push([]);for(var b=-center.x;b<=cvs.w-center.x;b++)if(0==b%res){let c=b/one.x,d=a(c);d>yMax.p?d=yMax.p:d<yMax.n&&(d=yMax.n);let e={x:c*one.x+center.x,y:center.y-d*one.y};fig[counter].push(e)}counter++});
